<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CHERRY.Views.CyclePage"
             Title=""
             NavigationPage.HasNavigationBar="False">

    <ContentPage.Resources>
        <Style x:Key="CardTitle" TargetType="Label">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontAttributes" Value="Bold" />
            <Setter Property="TextColor" Value="#333333" />
        </Style>

        <Style x:Key="StatValue" TargetType="Label">
            <Setter Property="FontSize" Value="20" />
            <Setter Property="FontAttributes" Value="Bold" />
            <Setter Property="TextColor" Value="#6A5ACD" />
            <Setter Property="HorizontalOptions" Value="Center" />
        </Style>

        <Style x:Key="StatLabel" TargetType="Label">
            <Setter Property="FontSize" Value="12" />
            <Setter Property="TextColor" Value="#666666" />
            <Setter Property="HorizontalOptions" Value="Center" />
        </Style>

        <Style x:Key="ActionFrame" TargetType="Frame">
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Padding" Value="15" />
            <Setter Property="HasShadow" Value="False" />
            <Setter Property="HeightRequest" Value="80" />
            <Setter Property="WidthRequest" Value="80" />
        </Style>
    </ContentPage.Resources>

    <Grid>
        <ScrollView>

            <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto,*" 
                  RowSpacing="10"
                  Padding="20"
                  Margin="0,0,0,0">

                <Border Grid.Row="0"
                        StrokeShape="RoundRectangle 0,0,100,100"
                        HeightRequest="230"
                        BackgroundColor="{Binding HeaderBackgroundColor}"
                        Padding="10,20,10,10"
                        Margin="-20,-30,-20,0"
                        x:Name="HeaderBorder">

                    <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,*,Auto"
                          VerticalOptions="Start">

                        <!-- Profile Icon (Left) -->
                        <Border Grid.Column="0" Grid.Row="0"
                                StrokeShape="RoundRectangle 20"
                                HeightRequest="40"
                                WidthRequest="40"
                                StrokeThickness="0"
                                Background="Transparent">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnProfileClicked" />
                            </Border.GestureRecognizers>
                            <Image Source="profile_icon.png"
                                   Aspect="AspectFill"
                                   HorizontalOptions="Fill"
                                   VerticalOptions="Fill"/>
                        </Border>

                        <!-- Current Date (Center) -->
                        <Label Grid.Column="1" Grid.Row="0"
                               x:Name="CurrentDateLabel"
                               FontSize="18"
                               TextColor="White"
                               HorizontalOptions="Center"
                               VerticalOptions="Start" />

                        <!-- Menu Icon (Right) -->
                        <ImageButton Grid.Column="2" Grid.Row="0"
                                     Source="menu_icon.png"
                                     WidthRequest="28"
                                     HeightRequest="28"
                                     BackgroundColor="Transparent"
                                     HorizontalOptions="End"
                                     VerticalOptions="Center"/>

                        <Label  Grid.Column="1" Grid.Row="1"
                                Text="Prediction"
                                FontSize="16"
                                TextColor="#4e4e4e"
                                Padding="10"
                                HorizontalOptions="Center"/>

                        <Label Grid.Column="1" Grid.Row="2"
                               x:Name="DailyTipLabel"
                               FontSize="18"
                               FontAttributes="Bold"
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"
                               VerticalTextAlignment="Center"
                               LineBreakMode="WordWrap"
                               TextColor="#4e4e4e"
                               WidthRequest="250" />


                    </Grid>
                </Border>


                <!-- Current Status Card -->
                <Frame Grid.Row="1"
                       CornerRadius="15"
                       BackgroundColor="White"
                       Padding="20"
                       HasShadow="True">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="CURRENT CYCLE STATUS"
                               Style="{StaticResource CardTitle}" />

                        <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto,Auto" 
                              RowSpacing="10" ColumnSpacing="15">
                            <Label Text="Cycle Day:"
                                   Grid.Row="0" Grid.Column="0"
                                   FontAttributes="Bold"
                                   TextColor="#666666" />
                            <Label x:Name="CycleDayLabel"
                                   Text="Day 12"
                                   Grid.Row="0" Grid.Column="1"
                                   TextColor="#333333" />

                            <Label Text="Next Period:"
                                   Grid.Row="1" Grid.Column="0"
                                   FontAttributes="Bold"
                                   TextColor="#666666" />
                            <Label x:Name="NextPeriodLabel"
                                   Text="in 16 days"
                                   Grid.Row="1" Grid.Column="1"
                                   TextColor="#333333" />

                            <Label Text="Ovulation:"
                                   Grid.Row="2" Grid.Column="0"
                                   FontAttributes="Bold"
                                   TextColor="#666666" />
                            <Label x:Name="OvulationLabel"
                                   Text="in 2 days"
                                   Grid.Row="2" Grid.Column="1"
                                   TextColor="#333333" />

                            <Label Text="Fertility:"
                                   Grid.Row="3" Grid.Column="0"
                                   FontAttributes="Bold"
                                   TextColor="#666666" />
                            <Label x:Name="FertilityLabel"
                                   Text="High"
                                   Grid.Row="3" Grid.Column="1"
                                   TextColor="#333333" />
                        </Grid>
                    </VerticalStackLayout>
                </Frame>

                <!-- Quick Actions -->
                <Border Grid.Row="2"
                       StrokeShape="15"
                       BackgroundColor="White"
                       Padding="20">
                    
                    <VerticalStackLayout Spacing="15">
                        <Label Text="QUICK ACTIONS"
                                Style="{StaticResource CardTitle}" />


                        <ScrollView Orientation="Horizontal"
                                    HorizontalScrollBarVisibility="Never"
                                    Padding="10">

                            <HorizontalStackLayout Spacing="15">

                                <!-- Log Period Button -->
                                <Border StrokeShape="RoundRectangle 15,15,15,15"
                                        BackgroundColor="#FF6B8B"
                                        Stroke="White"
                                        StrokeThickness="2"
                                        Padding="2"
                                        HeightRequest="120"
                                        WidthRequest="100"
                                        HorizontalOptions="Center">
                                    <Border StrokeShape="RoundRectangle 13,13,13,13"
                                            BackgroundColor="#FF6B8B"
                                            Stroke="White"
                                            StrokeThickness="2"
                                            Padding="0">
                                        <VerticalStackLayout Spacing="8"
                                                             HorizontalOptions="Center"
                                                             VerticalOptions="Center">
                                            <Label Text="âœ“"
                                                   FontSize="32"
                                                   FontAttributes="Bold"
                                                   HorizontalOptions="Center"
                                                   VerticalOptions="Center" />
                                            <Label Text="Log Period"
                                                   FontSize="14"
                                                   TextColor="White"
                                                   HorizontalOptions="Center"
                                                   VerticalOptions="Center" />
                                        </VerticalStackLayout>
                                        <Border.GestureRecognizers>
                                            <TapGestureRecognizer Tapped="OnLogPeriodClicked" />
                                        </Border.GestureRecognizers>
                                    </Border>
                                </Border>

                                <!-- Calendar Button -->
                                <Border StrokeShape="RoundRectangle 15,15,15,15"
                                        BackgroundColor="#6A5ACD"
                                        Stroke="White"
                                        StrokeThickness="2"
                                        Padding="2"
                                        HeightRequest="120"
                                        WidthRequest="100"
                                        HorizontalOptions="Center">
                                    <Border StrokeShape="RoundRectangle 13,13,13,13"
                                            BackgroundColor="#6A5ACD"
                                            Stroke="White"
                                            StrokeThickness="2"
                                            Padding="0">
                                        <VerticalStackLayout Spacing="8"
                                                             HorizontalOptions="Center"
                                                             VerticalOptions="Center">
                                            <Label Text="ðŸ“†"
                                                   FontSize="32"
                                                   TextColor="White"
                                                   HorizontalOptions="Center"
                                                   VerticalOptions="Center" />
                                            <Label Text="Calendar"
                                                   FontSize="14"
                                                   TextColor="White"
                                                   HorizontalOptions="Center"
                                                   VerticalOptions="Center" />
                                        </VerticalStackLayout>
                                        <Border.GestureRecognizers>
                                            <TapGestureRecognizer Tapped="OnCalendarClicked" />
                                        </Border.GestureRecognizers>
                                    </Border>
                                </Border>

                                <!-- Settings Button -->
                                <Border StrokeShape="RoundRectangle 15,15,15,15"
                                        BackgroundColor="#4ECDC4"
                                        Stroke="White"
                                        StrokeThickness="2"
                                        Padding="2"
                                        HeightRequest="120"
                                        WidthRequest="100"
                                        HorizontalOptions="Center">
                                    <Border StrokeShape="RoundRectangle 13,13,13,13"
                                            BackgroundColor="#4ECDC4"
                                            Stroke="White"
                                            StrokeThickness="2"
                                            Padding="0">
                                        <VerticalStackLayout Spacing="8"
                                                             HorizontalOptions="Center"
                                                             VerticalOptions="Center">
                                            <Label Text="âš™ï¸"
                                                   FontSize="32"
                                                   TextColor="White"
                                                   HorizontalOptions="Center"
                                                   VerticalOptions="Center" />
                                            <Label Text="Settings"
                                                   FontSize="14"
                                                   TextColor="White"
                                                   HorizontalOptions="Center"
                                                   VerticalOptions="Center" />
                                        </VerticalStackLayout>
                                        <Border.GestureRecognizers>
                                            <TapGestureRecognizer Tapped="OnSettingsClicked" />
                                        </Border.GestureRecognizers>
                                    </Border>
                                </Border>

                                <!-- Emergency Button -->
                                <Border StrokeShape="RoundRectangle 15,15,15,15"
                                        BackgroundColor="#FF4D4D"
                                        Stroke="White"
                                        StrokeThickness="2"
                                        Padding="2"
                                        HeightRequest="120"
                                        WidthRequest="100"
                                        HorizontalOptions="Center">
                                    <Border StrokeShape="RoundRectangle 13,13,13,13"
                                            BackgroundColor="#FF4D4D"
                                            Stroke="White"
                                            StrokeThickness="2"
                                            Padding="0">
                                        <VerticalStackLayout Spacing="8"
                                                             HorizontalOptions="Center"
                                                             VerticalOptions="Center">
                                            <Label Text="ðŸš¨"
                                                   FontSize="32"
                                                   TextColor="White"
                                                   HorizontalOptions="Center"
                                                   VerticalOptions="Center" />
                                            <Label Text="Emergency"
                                                   FontSize="14"
                                                   TextColor="White"
                                                   HorizontalOptions="Center"
                                                   VerticalOptions="Center" />
                                        </VerticalStackLayout>
                                        <Border.GestureRecognizers>
                                            <TapGestureRecognizer Tapped="OnEmergencyClicked" />
                                        </Border.GestureRecognizers>
                                    </Border>
                                </Border>

                            </HorizontalStackLayout>
                        </ScrollView>


                    </VerticalStackLayout>
                </Border>

                <!-- Recent History -->
                <Frame Grid.Row="3"
                       CornerRadius="15"
                       BackgroundColor="White"
                       Padding="20"
                       HasShadow="True">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="RECENT HISTORY"
                               Style="{StaticResource CardTitle}" />

                        <BoxView HeightRequest="1" 
                                 Color="#EEEEEE" 
                                 HorizontalOptions="Fill" />

                        <Grid ColumnDefinitions="*,*,*" 
                              RowDefinitions="Auto,Auto,Auto"
                              RowSpacing="10">
                            <Label Text="Start Date"
                                   Grid.Row="0" Grid.Column="0"
                                   FontAttributes="Bold"
                                   TextColor="#666666" />
                            <Label Text="Duration"
                                   Grid.Row="0" Grid.Column="1"
                                   FontAttributes="Bold"
                                   TextColor="#666666" />
                            <Label Text="Cycle Length"
                                   Grid.Row="0" Grid.Column="2"
                                   FontAttributes="Bold"
                                   TextColor="#666666" />

                            <Label x:Name="RecentPeriod1Label"
                                   Grid.Row="1" Grid.Column="0"
                                   TextColor="#333333" />
                            <Label x:Name="RecentDuration1Label"
                                   Grid.Row="1" Grid.Column="1"
                                   TextColor="#333333" />
                            <Label x:Name="RecentCycle1Label"
                                   Grid.Row="1" Grid.Column="2"
                                   TextColor="#333333" />

                            <Label x:Name="RecentPeriod2Label"
                                   Grid.Row="2" Grid.Column="0"
                                   TextColor="#333333" />
                            <Label x:Name="RecentDuration2Label"
                                   Grid.Row="2" Grid.Column="1"
                                   TextColor="#333333" />
                            <Label x:Name="RecentCycle2Label"
                                   Grid.Row="2" Grid.Column="2"
                                   TextColor="#333333" />
                        </Grid>
                    </VerticalStackLayout>
                </Frame>

                <!-- Statistics -->
                <Frame Grid.Row="4"
                       CornerRadius="15"
                       BackgroundColor="White"
                       Padding="20"
                       HasShadow="True">
                    <VerticalStackLayout Spacing="15">
                        <Label Text="STATISTICS"
                               Style="{StaticResource CardTitle}" />

                        <Grid ColumnDefinitions="*,*" 
                              RowDefinitions="Auto,Auto"
                              RowSpacing="15"
                              ColumnSpacing="15">

                            <Frame Grid.Row="0" Grid.Column="0"
                                   CornerRadius="12"
                                   BackgroundColor="#F8F9FA"
                                   Padding="15"
                                   HasShadow="False">
                                <VerticalStackLayout Spacing="5"
                                                     HorizontalOptions="Center">
                                    <Label x:Name="AvgCycleLabel"
                                           Style="{StaticResource StatValue}" />
                                    <Label Text="Avg Cycle"
                                           Style="{StaticResource StatLabel}" />
                                </VerticalStackLayout>
                            </Frame>

                            <Frame Grid.Row="0" Grid.Column="1"
                                   CornerRadius="12"
                                   BackgroundColor="#F8F9FA"
                                   Padding="15"
                                   HasShadow="False">
                                <VerticalStackLayout Spacing="5"
                                                     HorizontalOptions="Center">
                                    <Label x:Name="AvgPeriodLabel"
                                           Style="{StaticResource StatValue}" />
                                    <Label Text="Avg Period"
                                           Style="{StaticResource StatLabel}" />
                                </VerticalStackLayout>
                            </Frame>

                            <Frame Grid.Row="1" Grid.Column="0"
                                   CornerRadius="12"
                                   BackgroundColor="#F8F9FA"
                                   Padding="15"
                                   HasShadow="False">
                                <VerticalStackLayout Spacing="5"
                                                     HorizontalOptions="Center">
                                    <Label x:Name="OvulationDayLabel"
                                           Style="{StaticResource StatValue}" />
                                    <Label Text="Ovulation Day"
                                           Style="{StaticResource StatLabel}" />
                                </VerticalStackLayout>
                            </Frame>

                            <Frame Grid.Row="1" Grid.Column="1"
                                   CornerRadius="12"
                                   BackgroundColor="#F8F9FA"
                                   Padding="15"
                                   HasShadow="False">
                                <VerticalStackLayout Spacing="5"
                                                     HorizontalOptions="Center">
                                    <Label x:Name="CyclePatternLabel"
                                           Style="{StaticResource StatValue}" />
                                    <Label Text="Cycle Pattern"
                                           Style="{StaticResource StatLabel}" />
                                </VerticalStackLayout>
                            </Frame>
                        </Grid>
                    </VerticalStackLayout>
                </Frame>
            </Grid>
        </ScrollView>
    </Grid>

</ContentPage>