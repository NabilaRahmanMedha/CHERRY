<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CHERRY.Views.CalendarPage"
             Title="Calendar"
             BackgroundColor="#F8F9FA">

    <ContentPage.Resources>
        <!-- Color Resources -->
        <Color x:Key="PrimaryColor">#6A5ACD</Color>
        <Color x:Key="PeriodColor">#FFB6C1</Color>
        <Color x:Key="PredictedPeriodColor">#FFD6DC</Color>
        <Color x:Key="OvulationColor">#E0BBE4</Color>
        <Color x:Key="FutureDateColor">#F5F5F5</Color>
        <Color x:Key="FutureTextColor">#CCCCCC</Color>
        <Color x:Key="TodayBorderColor">#6A5ACD</Color>
        <Color x:Key="PredictedBorderColor">#FF6B8B</Color>
        <Color x:Key="GrayTextColor">#666666</Color>
        <Color x:Key="DarkTextColor">#333333</Color>

        <!-- Style Resources -->
        <Style x:Key="NavButtonStyle" TargetType="Button">
            <Setter Property="WidthRequest" Value="40" />
            <Setter Property="HeightRequest" Value="40" />
            <Setter Property="CornerRadius" Value="20" />
            <Setter Property="BackgroundColor" Value="{StaticResource PrimaryColor}" />
            <Setter Property="TextColor" Value="White" />
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontAttributes" Value="Bold" />
        </Style>

        <Style x:Key="MonthLabelStyle" TargetType="Label">
            <Setter Property="FontSize" Value="20" />
            <Setter Property="FontAttributes" Value="Bold" />
            <Setter Property="TextColor" Value="{StaticResource DarkTextColor}" />
            <Setter Property="HorizontalOptions" Value="Center" />
            <Setter Property="VerticalOptions" Value="Center" />
        </Style>

        <Style x:Key="PredictionLabelStyle" TargetType="Label">
            <Setter Property="FontSize" Value="14" />
            <Setter Property="TextColor" Value="{StaticResource PrimaryColor}" />
            <Setter Property="HorizontalOptions" Value="Center" />
            <Setter Property="HorizontalTextAlignment" Value="Center" />
        </Style>

        <Style x:Key="DayHeaderLabelStyle" TargetType="Label">
            <Setter Property="FontAttributes" Value="Bold" />
            <Setter Property="HorizontalOptions" Value="Center" />
            <Setter Property="VerticalOptions" Value="Center" />
            <Setter Property="TextColor" Value="{StaticResource GrayTextColor}" />
            <Setter Property="FontSize" Value="14" />
        </Style>

        <Style x:Key="DayLabelStyle" TargetType="Label">
            <Setter Property="HorizontalOptions" Value="Center" />
            <Setter Property="VerticalOptions" Value="Center" />
            <Setter Property="FontSize" Value="16" />
        </Style>

        <Style x:Key="DayFrameStyle" TargetType="Frame">
            <Setter Property="CornerRadius" Value="20" />
            <Setter Property="WidthRequest" Value="40" />
            <Setter Property="HeightRequest" Value="40" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="HasShadow" Value="False" />
        </Style>

        <Style x:Key="EditButtonStyle" TargetType="Button">
            <Setter Property="BackgroundColor" Value="Transparent" />
            <Setter Property="TextColor" Value="{StaticResource PrimaryColor}" />
            <Setter Property="BorderColor" Value="#FFB6C1" />
            <Setter Property="BorderWidth" Value="2" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="Padding" Value="20,10" />
            <Setter Property="FontAttributes" Value="Bold" />
            <Setter Property="HorizontalOptions" Value="Center" />
        </Style>

        <Style x:Key="SectionHeader" TargetType="Label">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontAttributes" Value="Bold" />
            <Setter Property="TextColor" Value="#333333" />
            <Setter Property="Margin" Value="0,10,0,5" />
        </Style>

        <Style x:Key="StatValue" TargetType="Label">
            <Setter Property="FontSize" Value="20" />
            <Setter Property="FontAttributes" Value="Bold" />
            <Setter Property="TextColor" Value="#6A5ACD" />
            <Setter Property="HorizontalOptions" Value="Center" />
        </Style>

        <Style x:Key="StatLabel" TargetType="Label">
            <Setter Property="FontSize" Value="12" />
            <Setter Property="TextColor" Value="#666666" />
            <Setter Property="HorizontalOptions" Value="Center" />
        </Style>
    </ContentPage.Resources>

    <ScrollView>
        <Grid RowDefinitions="Auto,Auto,Auto,*,Auto,Auto,Auto" RowSpacing="0">

            <!-- Month and Year Header -->
            <Label x:Name="MonthLabel"
                   Text="NOVEMBER 2024"
                   Style="{StaticResource MonthLabelStyle}"
                   Margin="0,20,0,10"
                   Grid.Row="0"/>

            <!-- Prediction Label -->
            <Label x:Name="PredictionLabel"
                   Text="Track your cycles to get predictions"
                   Style="{StaticResource PredictionLabelStyle}"
                   Margin="0,0,0,10"
                   Grid.Row="1"/>

            <!-- Quick Stats -->
            <Frame Grid.Row="2" 
                   CornerRadius="10" 
                   BackgroundColor="#F8F9FA" 
                   Padding="15"
                   Margin="15,0,15,10"
                   HasShadow="False">
                <Grid ColumnDefinitions="*,*,*,*" ColumnSpacing="10">
                    <!-- Cycle Day -->
                    <VerticalStackLayout Grid.Column="0" Spacing="5">
                        <Label Text="CYCLE DAY" Style="{StaticResource StatLabel}"/>
                        <Label x:Name="CycleDayLabel" Text="-" Style="{StaticResource StatValue}"/>
                    </VerticalStackLayout>

                    <!-- Next Period -->
                    <VerticalStackLayout Grid.Column="1" Spacing="5">
                        <Label Text="NEXT PERIOD" Style="{StaticResource StatLabel}"/>
                        <Label x:Name="NextPeriodLabel" Text="-" Style="{StaticResource StatValue}"/>
                    </VerticalStackLayout>

                    <!-- Ovulation -->
                    <VerticalStackLayout Grid.Column="2" Spacing="5">
                        <Label Text="OVULATION" Style="{StaticResource StatLabel}"/>
                        <Label x:Name="OvulationLabel" Text="-" Style="{StaticResource StatValue}"/>
                    </VerticalStackLayout>

                    <!-- Fertility -->
                    <VerticalStackLayout Grid.Column="3" Spacing="5">
                        <Label Text="FERTILITY" Style="{StaticResource StatLabel}"/>
                        <Label x:Name="FertilityLabel" Text="-" Style="{StaticResource StatValue}"/>
                    </VerticalStackLayout>
                </Grid>
            </Frame>

            <!-- Calendar Grid -->
            <Grid x:Name="CalendarGrid"
                  RowSpacing="10"
                  ColumnSpacing="10"
                  Padding="20,0,20,0"
                  HorizontalOptions="Center"
                  VerticalOptions="Start"
                  Grid.Row="3">
                <!-- Dynamically generated in code-behind -->
            </Grid>

            <!-- Legend -->
            <Frame Grid.Row="4" 
                   CornerRadius="10" 
                   BackgroundColor="#F8F9FA" 
                   Padding="15"
                   Margin="15,10,15,5"
                   HasShadow="False">
                <HorizontalStackLayout Spacing="15" HorizontalOptions="Center">
                    <HorizontalStackLayout Spacing="5">
                        <BoxView WidthRequest="15" HeightRequest="15" Color="#FFB6C1" CornerRadius="3"/>
                        <Label Text="Period" FontSize="12" TextColor="#666666"/>
                    </HorizontalStackLayout>
                    <HorizontalStackLayout Spacing="5">
                        <BoxView WidthRequest="15" HeightRequest="15" Color="#FFD6DC" CornerRadius="3"/>
                        <Label Text="Predicted" FontSize="12" TextColor="#666666"/>
                    </HorizontalStackLayout>
                    <HorizontalStackLayout Spacing="5">
                        <BoxView WidthRequest="15" HeightRequest="15" Color="#E0BBE4" CornerRadius="3"/>
                        <Label Text="Ovulation" FontSize="12" TextColor="#666666"/>
                    </HorizontalStackLayout>
                </HorizontalStackLayout>
            </Frame>

            <!-- Navigation Controls -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="20" 
                  HorizontalOptions="Center" Grid.Row="5" Margin="0,10,0,5">
                <Button Text="◀" 
                        Style="{StaticResource NavButtonStyle}"
                        Clicked="OnPrevMonthClicked"/>
                <Button Text="▶" 
                        Grid.Column="1"
                        Style="{StaticResource NavButtonStyle}"
                        Clicked="OnNextMonthClicked"/>
            </Grid>

            <!-- Edit Button -->
            <Button Text="Edit Dates"
                    Style="{StaticResource EditButtonStyle}"
                    Grid.Row="6"
                    Margin="0,5,0,20"
                    Clicked="OnEditClicked"/>

        </Grid>
    </ScrollView>
</ContentPage>